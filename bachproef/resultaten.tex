\chapter{\IfLanguageName{dutch}{Resultaten}{Results}}
\label{ch:res}

In dit onderdeel zal de accuraatheid en de efficiëntie van het ontwikkelde proof of concept (POC) worden getest. Ook zal hier worden bekeken hoeveel utterances er bij de 'Review endpoint' utterances komen met en zonder de implementatie van de proof of concept.

Eerst en vooral zullen er per intent een 6 tal voorbeeld utterances worden opgesteld. Dat zal gedaan worden voor de volgende intents: AddMore, ClearBasket, DeleteItem, FindItem, Greeting, Help, RemoveMove, ShowBasket, ShowProfile, Stop en UpdateProfile. Aan de hand van deze voorbeelden zal er gestest worden.

Deze testen zullen verschillende keren worden uitgevoerd. Er zijn een aantal parameters in de POC die kunnen aangepast worden. Uit deze testen zullen uiteindelijk blijken wat de beste parameters zijn voor de optimale accuraatheid.

\section{Testdata}
\label{sec:testdata}

De testdata van deze opzet bevindt zich in bijlage. De eerste 4 voorbeeld utterances van elke intent zullen als input doorgestuurd worden naar de bot, dus naar LUIS zelf. Dit zal gedaan worden met en zonder het uitgewerkte proof of concept. Dan zal er gekeken worden hoeveel van deze utterances er bij 'Review endpoint' komen wanneer er wordt gewerkt op de gewonen manier zonder het uitgewerkte POC en daarna zal gekeken worden hoeveel er bijkomen als er wordt gewerkt met het gemaakte POC. De laatste 2 voorbeeld utterances van elke intent zullen gebruikt worden om te controleren hoe hard de accuraatheid per utterance is veranderd voor en na het ingeven van de 4 eerste voorbeeld utterances. Dit zal ook gedaan worden eerst op de gewone manier en dan met het POC.

\section{Uitwerking}
\label{sec:uitwerking}

Na het opzetten van de testdata kan er uiteindelijk getest worden. Op de site van LUIS zelf is er een tool ter beschikking om meerdere utterances uit te voeren en daar de resultaten kan bekijken genaamd 'batch testing'. De bedoeling is dat je alle inputs die getest moeten worden in een json formaat upload. In deze json dient bij elke input de intent meegegeve te worden en eventueel de entities. De entities zijn hier niet noodzakelijk omdat LUIS deze er automatisch uithaald. Eénmaal de json is opgesteld kan deze worden geïmporteerd in de 'batch testing panel'. LUIS leest deze json dan in en als ze verwerkt is kan de test worden uitgevoerd.

Aan de hand van hoe groot de test is zal deze redelijk snel worden uitgevoerd en kan er al direct naar de resultaten worden gekeken. Hier kan er gezien worden hoeveel van de utterances geslaagd zijn en kan er per utterance dan nog eens in detail bekeken worden met een percentage aan welke intent deze wordt gelinkt.

Bij de testen die zullen uitgevoerd worden zal er telkens dezelfde set aan input gebruikt worden. Dit is een test die één maal zal worden uitgevoerd voor al de andere testen beginnen en één maal na alle andere testen. Aan de hand van deze test zal er bekeken worden in welke mate de POC invloed heeft op de scores die LUIS heeft aan elke utterance samen met de intent. Idealiter zou zijn dat de scores stijgen. Als deze zouden dalen zou dat betekenen dat er utterances gelinkt zijn aan de verkeerde intent. Dit is iets dat zeker moet worden vermeden.

Bij het uitvoeren van deze test zijn er 22 inputs die getest worden. Hier is gebleken dat LUIS 2 van die 22 utterances aan de foute intent heeft gelinkt. Dit kan komen door de beperkte aantal voorbeeld utterances die LUIS bevat. Het zou pas een probleem zijn moest ui de laatste test blijken dat dit aantal zou stijgen.

Nu dat deze test heeft gelopen kan er aan de slag worden gegaan met de andere testdata, de 4 andere voorbeeld inputs per intent, in totaal zijn dit 44 inputs. Deze voorbeeldzinnen zullen via de 'Bot Framework Emulator' worden ingegeven, zo zullen de zinnen ook binnen komen in LUIS als er echte gebruikers met de bot zouden praten via messenger bijvoorbeeld.

Omdat dit 44 zinnen zijn en dit is vrij veel om deze meerdere keren handmatig te moeten ingeven zal er een manier moeten gezocht worden om dit te automatiseren. De oplossing die hiervoor is gevonden is met een programma genaamd 'MurGaa auto talker'. In dit programma kan je al de inputs éénmaal ingeven en dien je er verder niets meer met te doen. Er kan ingesteld worden dat dit programma de berichten verstuurt naar de emulator. Elke 5 seconden wordt er zo automatisch een bericht gestuurd naar de chatbot tot als alle inputs zijn ingegeven. Op deze manier dien je niet elke zin appart in te geven en zal dit veel tijd besparen.

Al deze 44 inputs worden nu automatisch ingegeven in de emulator. Deze emultor stuurt deze dan naar de POC die dan opzich LUIS zal aanroepen. Er zullen hier ook 2 testen worden uitgevoerd. Bij de eerste test zal de POC de utterances gewoon doorsturen naar LUIS zonder verder iets te doen, zoals het altijd al gebeurde dus. Bij de tweede test zal het systeem worden aangezet die is ontwikkeld voor het controleren van elke utterance en deze dan zal toevoegen aan LUIS indien dat kan.

Door hier op deze 2 manieren te testen zal er in LUIS worden gekeken na elke test hoeveel van deze 44 inputs er komen in de 'Review enpoint utterances' tab en zal zo berekend kunnen worden hoeveel percent minder utterances in deze tab komen als het systeem is ingeschakeld.

Na het doorlopen van de eerste test is gebleken dat zo goed als alle inputs komen bij 'Review endpoint utterances' wat dus zeer inefficient is. Hier is er dus zeer veel werk nodig om elke utterance te bekijken en deze te valideren. Na de eerste test is het systeem ingeschakeld en zal een tweede test worden uitgevoerd. De 'MurGaa auto talker' zal weer de 44 inputs doorsturen naar de emulator. Uit de tweede test is gebleken dat in plaats van een 40 tal utterances die komen bij 'Review endpoint utterances' er nu maar een 20 tal meer in komen. Dit betekend dat zo een 50 percent van de utterances niet meer bekeken zal worden want deze zijn al automatisch gelinkt aan de juiste intent. Na het controleren of deze wel effectief correct zijn toegevoegd zijn er geen fouten gevonden. Het kan wel zijn dat LUIS soms een entity niet vindt of fout benoemd. Dit komt door het beperkt aantal utterances per intent.

Nu dit allemaal is getest en de resultaten positief zijn kan nu de tweede batchtest worden gedaan. LUIS is nu veranderd doordat de POC automatisch nieuwe utterances heeft toegevoegd een de intent. Hier kan er dan gezien worden of dit wel effectief niet is verslechterd en eventueel beter is geworden.

\begin{figure}[h!]
	\centering
	\includegraphics[height=9cm]{img/grafiek.png}
	\caption{Resultaat batch testen}
	\label{fig:batchtest}
\end{figure}



%paramaters

%basic utterances per intent

%Voor toepassing systeem

%2 zinnen niet herkent
